<html layout:decorate="~{common/layout.html}" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="google-site-verification" content="sQiZ_6UmkUqKsbsVxiJCbhAyVsTgPXR5VuiZeJcwmcI" />
    <meta name="naver-site-verification" content="f618de6618a8492f312e11e4a43865e0db680640" />
    <!--    <link href="../style/minigame.css" rel="stylesheet" type="text/css">-->
    <link rel="stylesheet" href="/minigame/style/minigame.css">
    <link rel="shortcut icon" href="images/logo.png"  type="image/x-icon">
    <meta name="description" content="우클릭을 통해서 스팀 할인마를 피하세요!">
    <meta name="keywords" content="무빙게임">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2103530159465170" crossorigin="anonymous"></script>
    <title>할인마를 피해라!</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2103530159465170"
            crossorigin="anonymous"></script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S4BCVC7KVR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-S4BCVC7KVR');
</script>
<body>
<main layout:fragment="main">


    <div class="content">


        <div class="game-row">

            <div class="side-ad">

                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2103530159465170"
                        crossorigin="anonymous"></script>
                <!-- 수직반응 -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-2103530159465170"
                     data-ad-slot="7117882934"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>

            </div>

            <div class="game-container">


                <div class="game disabled"> <!-- disabled 클래스 추가 -->
                    <div id="notification"></div>
                    <div class="character">
                        <div th:if="${@rq.isLogin()}" class="character-container">
                            <img th:src="${currentUser.getAvatar()}" class="w-full h-full object-cover" style="border-radius: 50%;">
                        </div>
                        <div th:if="${!@rq.isLogin()}" class="character-container">
                        </div>


                        <div class="left-leg"></div>
                        <div class="right-leg"></div>
                        <div class="right-leg-back"></div>
                        <div class="left-leg-back"></div>
                    </div>
                    <button class="start-button btnPush btnLightBlue">게임 시작</button>
                    <div class="timer">0</div> <!-- 타이머 추가 -->
                </div>
            </div>
        </div>

        <!-- 등수 프로필 -->
        <div class="flex justify-center">
            <tr th:each="rankedGameUser : ${miniGameList}">

            </tr>
        </div>

<!--        <div th:each="fourToSevenUserGameTag, indexTwo : ${fourToSevenUser.getUserTag().getGameTag()}"-->
<!--             th:if="${indexTwo.size} != 0 and ${indexTwo.index} < 3">-->
<!--            <div class="badge bg-sky-400 badge-accent mt-2" th:text="${fourToSevenUserGameTag.getName()}"></div>-->
<!--        </div>-->

        <!-- 등수 프로필 -->
            <div class="flex flex-row justify-center">
                <div th:each="rankedGameUser, index : ${miniGameList}">
                <div class="rounded-xl shadow-3xl h-24 m-5 w-72 flex justify-center items-center" style="background-color: #202d3e;">
                    <div class="flex justify-center items-center">
                        <div class="text-2xl mr-4" th:text="${index.count} + 위"></div>
                        <img th:src="${rankedGameUser.getUser().getAvatar()}" class="w-14 h-14 mr-4 object-cover rounded-full">
                        <div>
                            <div class="border-b mb-2 text-sm" th:text="${rankedGameUser.getUser().getUsername()}"></div>
                            <div class="text-lg" th:text="${rankedGameUser.score} + 점"></div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        <!-- 등수 프로필 끝 -->


    </div>

    <!-- 로그인 했을 경우 -->
    <div th:if="${@rq.isLogin()}">
        <script th:inline="javascript">
            const currentUserId = /*[[${currentUser.id}]]*/ '';
            const token = /*[[${_csrf.token}]]*/ '';
            const header = /*[[${_csrf.headerName}]]*/ '';
        </script>
    </div>
    <!-- 로그인 하지 않았을 경우 -->
    <div th:if="${!@rq.isLogin()}">
    <script th:inline="javascript">
        const currentUserId = null;
    </script>
    </div>

    <script src="/minigame/js/minigame.js"></script>
</main>
</body>
</html>